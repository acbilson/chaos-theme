.panel-option {
	label {
		white-space: nowrap;
		padding-right: 3ch;
	}
}

.selected-panel-type {
	outline: 3px dashed var(--color-primary);
	outline-offset: 0.1rem;
}

.outref {
	border-bottom: 1px solid var(--color-stroke);
}

.story {
	border-top: 2px solid var(--color-stroke);
}

.poetry {
	width: fit-content;
	max-width: 100%;

	pre {
		font-style: italic;
		font-family: inherit;
	}
}

// for styles page
.style-circles {
	li {
		border: 1px solid black;
		border-radius: 50%;
		width: 100px;
		height: 100px;
		margin-left: -25px;
		margin-right: -25px;
	}
	[title="primary"] {
		background-color: var(--color-primary);
	}
	[title="secondary"] {
		background-color: var(--color-secondary);
	}
	[title="tertiary"] {
		background-color: var(--color-tertiary);
	}
	[title="stroke"] {
		background-color: var(--color-stroke);
	}
}

// for the todderish page
.vocab {
	h5 {
		display: inline;
		font-weight: 400;
	}
	.term {
		font-variant: small-caps;
	}
	.example {
		font-style: italic;
	}
	p:last-of-type {
		margin-left: 1ch;
	}
}

// comes from Hugo toc
#TableOfContents {
	width: fit-content;
	max-width: 100%;
	margin-left: 3ch;
	> ul {
		list-style-type: upper-roman;
		li > ul {
			list-style-type: upper-alpha;
			li > ul {
				list-style-type: lower-roman;
				li > ul {
					list-style-type: lower-alpha;
				}
			}
		}
	}
}

.notice {
	width: fit-content;
	max-width: 100%;
	border-top: calc(var(--border-size) / 2) solid var(--color-stroke);
	border-bottom: var(--border-size) solid var(--color-stroke);
	padding-left: 1ch;

	p:first-of-type {
		text-align: center;
		font-size: var(--step-3);
	}
	p:last-of-type {
		text-align: center;
	}
}

.portrait {
	margin-left: auto;
	margin-right: auto;
	// overrides the fit-content default
	width: initial;
	max-width: 600px;
	> img {
		border-radius: 50%;
	}
}

// a network diagram node
.diagram-node {
	> circle {
		stroke: var(--color-stroke);
	}
	> a > text {
		font-size: var(--step--2);
	}
}

// the lines between nodes
.diagram-link {
	stroke: var(--color-stroke);
}

// used on resumé page
table.two-column {
	tr,
	td {
		width: 50%;
	}
}

// used on resumé page
.timeline {
	h5 {
		text-align: center;
	}
	ul {
		@extend .flow-s;
	}
	.quote {
		text-align: center;
	}
}

.tags {
	display: flex;
	flex-wrap: wrap;
	column-gap: 1em;

	li {
		width: 17ch;
		white-space: nowrap;
		overflow: hidden;
	}
}

.navigation {
	background-color: var(--color-tertiary);
	padding-top: 0.5em;
	a,
	select {
		color: var(--color-secondary);
		text-decoration: none;
	}
}

.credits {
	background-color: var(--color-tertiary);
	padding-bottom: 0.5em;
	* {
		color: var(--color-secondary);
		font-size: var(--step--2);
	}
	.spread > div {
		max-width: 500px;
	}
}

.navigation + .curve {
	margin-top: unset;
}

.curve + .credits {
	margin-top: unset;
}

#backlinks {
	background-color: var(--color-primary);

	// prevents curve from cutting off backlinks
	padding-bottom: 0.5em;

	.icon {
		margin-left: 1ch;
	}

	> h3 {
		color: var(--color-secondary);
	}

	> p {
		color: var(--color-secondary);
		* {
			color: var(--color-secondary);
		}
	}
}

.curve + #backlinks {
	margin-top: unset;
}

#backlinks + .curve {
	// TODO: I don't know why there's still a gap with unset
	margin-top: -1.25em;
}

.curve + .curve {
	margin-top: -1.25em;
}

@keyframes wave {
	0% {
		transform: translateX(0);
	}
	50% {
		transform: translateX(calc(var(--wave-translation / 2)));
	}
	100% {
		transform: translateX(var(--wave-translation));
	}
}

.curve {
	fill: var(--color-tertiary);
	display: block;
	height: 3.5em;
	width: 200%;
	transform: translateX(calc(-1 * var(--wave-translation))) translateY(1px);

	.outer-wave {
		animation: wave 4s ease-in-out infinite alternate;
	}

	.inner-wave {
		animation: wave 3s ease-in-out infinite alternate;
	}
}

.curve.reverse {
	transform: translateX(calc(-1 * var(--wave-translation))) translateY(-1px)
		rotate(180deg);
}

.curve.backlinks {
	fill: var(--color-primary);
}

.card {
	border-width: 0.25em;
	border-style: double;
	border-color: var(--color-stroke);
	border-radius: var(--radius);
	padding-top: var(--flow-space, 1em);
	padding-bottom: var(--flow-space, 1em);

	// will try to fit content, but not outside of the container width
	width: fit-content;
	max-width: 100%;

	// sometimes URLs will blow past the max width.
	overflow: hidden;
}

.previous-cards {
	background-color: var(--color-tertiary);
	border-radius: var(--radius);
	padding-top: var(--flow-space, 1em);
	padding-bottom: var(--flow-space, 1em);
	> :not(button) {
		background-color: var(--color-secondary);
	}

	> button {
		@extend .invert-color;
	}
}

.filter-wide {
	li {
		@extend .spread-btwn;
	}

	li div:last-of-type {
		visibility: hidden;
	}

	li div:first-of-type:hover + div:last-of-type {
		visibility: visible;
	}
}

.filter-narrow {
	li {
		@extend .spread-down;
	}
}

.backrefs {
	* {
		color: var(--color-primary);
	}

	> li {
		width: 10em;
		background-color: var(--color-secondary);
		border-width: 0.25em;
		border-style: solid;
		border-color: var(--color-secondary);
		border-radius: var(--radius);
		padding: 0.5em;
		align-self: flex-start;
	}

	> li > a {
		font-weight: 600;
	}
}

// borrowed from https://every-layout.dev/layouts/switcher/
// either flex row or flex column based on a flex-basis threshold
.switcher {
	display: flex;
	flex-wrap: wrap;
	gap: var(--flex-gap, 0.5em);
}

.switcher > * {
	flex-grow: 1;
	flex-basis: calc((30rem - 100%) * 999);
}

.switcher > :nth-last-child(n + 5),
.switcher > :nth-last-child(n + 5) ~ * {
	flex-basis: 100%;
}
