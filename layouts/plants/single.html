{{- $title := partial "ops/get-title.html" . -}}
{{- $author := partial "ops/get-author.html" . -}}
{{- $path := strings.TrimSuffix ".md" (printf "/%s" .File.Path) -}}
<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}" dir="ltr">
{{ partialCached "head.html" . }}
<body class="flow-l">
	{{ partialCached "nav-bar.html" . }}
	<article class="wrapper flow-m e-content">
		<h1 id="jump">{{ $title }}</h1>
		<a class="u-url" href="{{ .Permalink }}" hidden></a>

		 <!-- Post Table of Contents -->
		{{ if isset .Params "toc" -}}
			{{ .TableOfContents }}
		{{- end }}

		{{ .Content }}

	</article>

<!-- TODO: move curve to a partial op -->
<svg class="curve reverse backlinks" preserveAspectRatio="none" viewBox="0 0 1440 96" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m0 96 80-5.3C160 85 320 75 480 64s320-21 480-21.3c160 .3 320 10.3 400 16l80 5.3V0H0v96Z"></path></svg>
	<aside id="backlinks" class="wrapper flow-m">

		{{- partial "backlink.html" (dict "path" (printf "/%s" .File.Path) "backrefs" $.Site.Data.backrefs "site" .Site) -}}
	</aside>
<svg class="curve backlinks" preserveAspectRatio="none" viewBox="0 0 1440 96" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m0 96 80-5.3C160 85 320 75 480 64s320-21 480-21.3c160 .3 320 10.3 400 16l80 5.3V0H0v96Z"></path></svg>

	<aside class="wrapper flow-m">
	{{ partial "attributes.html" . }}
	{{ partial "comments.html" . }}
	</aside>

		<chaos-panel data-panel-type="plant"
			><ul role="list">
				<chaos-panel-option
					data-key="date"
					data-label="Date"
					data-type="text"
					data-readonly="true"
				></chaos-panel-option>
				<chaos-panel-option
					data-key="path"
					data-label="File Path"
					data-type="text"
					data-required="true"
				></chaos-panel-option>
				<chaos-panel-option
					data-key="author"
					data-label="Author"
					data-type="text"
					data-required="true"
				></chaos-panel-option>
				<chaos-panel-option
					data-key="tags"
					data-label="Tags"
					data-type="list"
					data-required="true"
				></chaos-panel-option>
				<chaos-panel-option
					data-key="epistemic"
					data-label="Epistemic"
					data-type="text"
					data-required="true"
				></chaos-panel-option>
				<chaos-panel-option
					data-key="in-reply-to"
					data-label="In Reply To"
					data-type="text"
				></chaos-panel-option></ul
		></chaos-panel>
{{ partialCached "foot.html" . }}
{{ partialCached "scripts.html" . }}
{{ partialCached "scripts-mermaid.html" . }}

</body>
</html>
