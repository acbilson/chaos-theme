{{ $section := .Get "section" }}
{{ $events := .Get "events" }}
{{ $once := 1 }}

<!-- creates a new event from a list

     the list format is:
     "year|desc^year|desc^year|desc"
-->
{{ range split $events "^" }}
  <p>
  {{ if (and $once $section) }}
    <span class="timeline-title">{{ $section }}</span>
    {{ $once = 0 }}
  {{ end }}

  {{ $event := split . "|" }}
  {{ $year := index $event 0 }}
  {{ $desc := index $event 1 }}

  <b>{{ $year }}:</b> {{ $desc }}
  </p>
{{ end }}
